---
// Trapézlemez Helyettesítési Kalkulátor
// Pure Astro + vanilla JS – zero framework overhead
---

<div class="calc-root" id="trapezlemez-calc">
  <!-- Header -->
  <div class="calc-header">
    <span class="calc-badge">Eurocode 3 alapján</span>
    <h3 class="calc-title">Trapézlemez helyettesítési kalkulátor</h3>
    <p class="calc-subtitle">
      Hasonlítsd össze a piacon kapható lemezt a T18 0.5mm vagy 0.6mm-es lemezünkkel.
      Állítsd az alátámasztási távolságot és nézd meg, mit nyersz.
    </p>
  </div>

  <!-- Disclaimer -->
  <div class="calc-disclaimer">
    <div class="calc-disclaimer-inner">
      <span class="calc-disclaimer-icon">&#9888;</span>
      <div>
        <strong>Fontos: közelítő becslési értékek</strong>
        <span>
          Az itt megjelenített adatok <strong>acélanyagonként, gyártónként és profilgeometriánként változhatnak</strong>.
          Ezekre a számokra közelítő becslésként érdemes tekinteni – arra jók, hogy legyen képe a felhasználónak a
          <strong>nagyságrendekről</strong>, de <strong>nem vállalunk garanciát</strong>, hogy az adott egyedi
          esetben pontosan így alakulnak az értékek. A tényleges méretezést minden esetben jogosult tervező
          mérnök végezze.
        </span>
      </div>
    </div>
  </div>

  <!-- Main comparison grid -->
  <div class="calc-grid">
    <!-- LEFT: Competitor -->
    <div class="calc-panel calc-panel--comp">
      <div class="calc-panel-label calc-panel-label--comp">Amit ajánlottak</div>

      <div class="calc-field">
        <div class="calc-field-label">Profil</div>
        <div class="calc-btn-group" id="comp-profile-btns">
          <button data-value="T12" class="calc-btn calc-btn--comp">T12</button>
          <button data-value="T14" class="calc-btn calc-btn--comp">T14</button>
          <button data-value="T18" class="calc-btn calc-btn--comp">T18</button>
          <button data-value="T20" class="calc-btn calc-btn--comp calc-btn--active">T20</button>
          <button data-value="T25" class="calc-btn calc-btn--comp">T25</button>
          <button data-value="T35" class="calc-btn calc-btn--comp">T35</button>
        </div>
      </div>

      <div class="calc-field">
        <div class="calc-field-label">Vastagság</div>
        <div class="calc-btn-group" id="comp-thick-btns">
          <button data-value="0.4" class="calc-btn calc-btn--comp calc-btn--active">0.4mm</button>
          <button data-value="0.45" class="calc-btn calc-btn--comp">0.45mm</button>
          <button data-value="0.5" class="calc-btn calc-btn--comp">0.5mm</button>
          <button data-value="0.6" class="calc-btn calc-btn--comp">0.6mm</button>
          <button data-value="0.7" class="calc-btn calc-btn--comp">0.7mm</button>
        </div>
      </div>

      <div class="calc-slider-wrap">
        <div class="calc-slider-header">
          <span class="calc-slider-label">Szelementávolság</span>
          <span class="calc-slider-value calc-slider-value--comp" id="comp-span-val">100cm</span>
        </div>
        <input type="range" id="comp-span" class="calc-range calc-range--comp" min="40" max="150" step="5" value="100" />
        <div class="calc-slider-minmax">
          <span>40cm</span><span>150cm</span>
        </div>
      </div>

      <div class="calc-result">
        <div class="calc-result-label">Max. teherbírás</div>
        <div class="calc-result-value calc-result-value--comp" id="comp-capacity">0.00</div>
        <div class="calc-result-unit">kN/m²</div>
      </div>
    </div>

    <!-- RIGHT: Our offer -->
    <div class="calc-panel calc-panel--ours">
      <div class="calc-panel-label calc-panel-label--ours">T18 nálunk</div>

      <div class="calc-field">
        <div class="calc-field-label">Profil</div>
        <div class="calc-btn-group">
          <span class="calc-btn calc-btn--ours calc-btn--active calc-btn--fixed">T18</span>
        </div>
      </div>

      <div class="calc-field">
        <div class="calc-field-label">Vastagság</div>
        <div class="calc-btn-group" id="our-thick-btns">
          <button data-value="0.4" class="calc-btn calc-btn--ours">0.4mm</button>
          <button data-value="0.5" class="calc-btn calc-btn--ours">0.5mm</button>
          <button data-value="0.6" class="calc-btn calc-btn--ours calc-btn--active">0.6mm</button>
        </div>
      </div>

      <div class="calc-slider-wrap">
        <div class="calc-slider-header">
          <span class="calc-slider-label">Szelementávolság</span>
          <span class="calc-slider-value calc-slider-value--ours" id="our-span-val">80cm</span>
        </div>
        <input type="range" id="our-span" class="calc-range calc-range--ours" min="40" max="150" step="5" value="80" />
        <div class="calc-slider-minmax">
          <span>40cm</span><span>150cm</span>
        </div>
      </div>

      <div class="calc-result">
        <div class="calc-result-label">Max. teherbírás</div>
        <div class="calc-result-value calc-result-value--ours" id="our-capacity">0.00</div>
        <div class="calc-result-unit">kN/m²</div>
      </div>
    </div>
  </div>

  <!-- Verdict -->
  <div class="calc-verdict" id="calc-verdict">
    <div class="calc-verdict-header">
      <div class="calc-verdict-icon" id="verdict-icon"></div>
      <div>
        <div class="calc-verdict-text" id="verdict-text"></div>
        <div class="calc-verdict-hint" id="verdict-hint"></div>
      </div>
    </div>
    <div class="calc-bar-wrap">
      <div class="calc-bar-row">
        <span class="calc-bar-label" id="comp-bar-label"></span>
        <span class="calc-bar-value calc-bar-value--comp" id="comp-bar-value"></span>
      </div>
      <div class="calc-bar"><div class="calc-bar-fill calc-bar-fill--comp" id="comp-bar-fill"></div></div>
    </div>
    <div class="calc-bar-wrap">
      <div class="calc-bar-row">
        <span class="calc-bar-label" id="our-bar-label"></span>
        <span class="calc-bar-value calc-bar-value--ours" id="our-bar-value"></span>
      </div>
      <div class="calc-bar"><div class="calc-bar-fill calc-bar-fill--ours" id="our-bar-fill"></div></div>
    </div>
  </div>

  <!-- T18 load table -->
  <div class="calc-table-section">
    <h4 class="calc-table-title">T18 teherbírás – vastagság × szelementávolság</h4>
    <p class="calc-table-sub">Max. megengedett teher [kN/m²], háromtámaszú tartó, Eurocode 3</p>
    <div class="calc-table-wrap">
      <table class="calc-table">
        <thead>
          <tr>
            <th>Szelementáv</th>
            <th>0.4mm</th>
            <th class="col-highlight">0.5mm</th>
            <th class="col-highlight">0.6mm</th>
          </tr>
        </thead>
        <tbody id="calc-table-body"></tbody>
      </table>
    </div>
  </div>

  <!-- Why it works -->
  <div class="calc-why">
    <h4>Miért működik a helyettesítés?</h4>
    <p>
      A lemezre jutó hajlítónyomaték a szelementávolság <strong>négyzetével</strong> arányos:
      <code>M = w × L² / 8</code>
    </p>
    <p>
      Ha a szelementávolságot <strong>100cm → 80cm</strong>-re csökkented (2 extra szelemen egy 6m-es tetőn),
      a lemezre jutó igénybevétel <strong>36%-kal csökken</strong>.
    </p>
    <p>
      Ezt kombináld az <strong>50%-kal vastagabb</strong> acéllal (0.4→0.6mm),
      ami az Eurocode 3 hatékony szélességi módszere szerint
      <strong>több mint kétszeres</strong> hajlítási ellenállást ad –
      és máris kiválthat egy nagyobb profilú, de vékonyabb versenytárs-lemezt.
    </p>
  </div>

  <!-- Methodology note -->
  <div class="calc-methodology">
    <strong>Módszertani megjegyzés:</strong> A kalkulátor a Metal-Sheet Kft. nyilvánosan elérhető Eurocode 3 (ENV 1993-1-3)
    tervezési útmutatójából származó T20/1120 profil terhelési táblázatain alapul, háromtámaszú tartó
    statikai modellre, S220GD+Z acélminőségre. A T18 és egyéb profilok értékei a profilmagasság-arány
    alapján becsültek (~±15% pontossággal). <strong>Ez egy tájékoztató eszköz, nem helyettesíti a statikai
    tervezést.</strong> A tényleges méretezés minden esetben jogosult tervező mérnök feladata.
  </div>
</div>

<script>
  (function () {
    // ============================================================
    // REAL DATA: Metal-Sheet Kft. T20/1120 Eurocode 3 load tables
    // 3-span continuous beam (háromtámaszú tartó)
    // Source: Metal-Sheet Tervezési Útmutató 2021
    // ============================================================
    const T20_SPANS = [0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3, 1.4, 1.5];

    const T20_ULS: Record<number, number[]> = {
      0.4: [15.57, 9.97, 6.92, 5.08, 3.89, 3.08, 2.49, 2.06, 1.73, 1.47, 1.27, 1.11],
      0.45: [19.22, 12.30, 8.54, 6.28, 4.81, 3.80, 3.08, 2.54, 2.14, 1.82, 1.57, 1.37],
      0.5: [23.20, 14.85, 10.31, 7.58, 5.80, 4.58, 3.71, 3.07, 2.58, 2.20, 1.89, 1.65],
      0.6: [32.05, 20.51, 14.24, 10.46, 8.01, 6.33, 5.13, 4.24, 3.56, 3.03, 2.62, 2.28],
      0.7: [41.71, 26.69, 18.54, 13.62, 10.43, 8.24, 6.67, 5.52, 4.63, 3.95, 3.40, 2.97],
    };

    const T20_SLS: Record<number, number[]> = {
      0.4: [16.54, 13.23, 11.03, 8.46, 5.67, 3.98, 2.90, 2.18, 1.68, 1.32, 1.06, 0.86],
      0.45: [21.18, 16.94, 14.12, 10.13, 6.79, 4.77, 3.47, 2.61, 2.01, 1.58, 1.27, 1.03],
      0.5: [26.29, 21.04, 17.53, 11.87, 7.95, 5.58, 4.07, 3.06, 2.36, 1.85, 1.48, 1.21],
      0.6: [37.91, 30.33, 24.62, 15.51, 10.39, 7.30, 5.32, 4.00, 3.08, 2.42, 1.94, 1.58],
      0.7: [51.31, 41.05, 30.64, 19.30, 12.93, 9.08, 6.62, 4.97, 3.83, 3.01, 2.41, 1.96],
    };

    const PROFILE_SCALES: Record<string, number> = {
      T12: 0.52, T14: 0.62, T18: 0.88, T20: 1.0, T25: 1.28, T35: 1.85,
    };

    const THICKNESSES = [0.4, 0.45, 0.5, 0.6, 0.7];

    function interpolate(spans: number[], values: number[], target: number): number {
      if (target <= spans[0]) return values[0];
      if (target >= spans[spans.length - 1]) return values[values.length - 1];
      for (let i = 0; i < spans.length - 1; i++) {
        if (target >= spans[i] && target <= spans[i + 1]) {
          const t = (target - spans[i]) / (spans[i + 1] - spans[i]);
          return values[i] + t * (values[i + 1] - values[i]);
        }
      }
      return values[values.length - 1];
    }

    function getCapacity(profile: string, thickness: number, spanM: number): number {
      const scale = PROFILE_SCALES[profile] || 1.0;
      const thickKey = THICKNESSES.includes(thickness) ? thickness : 0.5;
      const uls = interpolate(T20_SPANS, T20_ULS[thickKey], spanM) * scale;
      const sls = interpolate(T20_SPANS, T20_SLS[thickKey], spanM) * scale;
      return Math.min(uls, sls);
    }

    // State
    let compProfile = 'T20';
    let compThick = 0.4;
    let compSpan = 100;
    let ourThick = 0.6;
    let ourSpan = 80;

    // DOM refs
    const $ = (id: string) => document.getElementById(id)!;

    function setupButtonGroup(containerId: string, onSelect: (val: string) => void) {
      const container = $(containerId);
      container.addEventListener('click', (e) => {
        const btn = (e.target as HTMLElement).closest('button');
        if (!btn) return;
        container.querySelectorAll('.calc-btn').forEach(b => b.classList.remove('calc-btn--active'));
        btn.classList.add('calc-btn--active');
        onSelect(btn.dataset.value!);
      });
    }

    function update() {
      const compCap = getCapacity(compProfile, compThick, compSpan / 100);
      const ourCap = getCapacity('T18', ourThick, ourSpan / 100);
      const maxCap = Math.max(compCap, ourCap, 1);
      const ratio = ourCap / compCap;
      const canSub = ratio >= 0.95;

      // Update display values
      $('comp-span-val').textContent = compSpan + 'cm';
      $('our-span-val').textContent = ourSpan + 'cm';
      $('comp-capacity').textContent = compCap.toFixed(2);
      $('our-capacity').textContent = ourCap.toFixed(2);

      // Update slider backgrounds
      updateSliderBg('comp-span', compSpan, 40, 150, '#ef4444');
      updateSliderBg('our-span', ourSpan, 40, 150, '#22d3ee');

      // Verdict
      const verdict = $('calc-verdict');
      verdict.className = 'calc-verdict ' + (canSub ? 'calc-verdict--yes' : 'calc-verdict--no');

      $('verdict-icon').textContent = canSub ? '\u2713' : '\u26A0';
      $('verdict-icon').className = 'calc-verdict-icon ' + (canSub ? 'calc-verdict-icon--yes' : 'calc-verdict-icon--no');

      if (canSub) {
        const pctDiff = Math.round((ratio - 1) * 100);
        $('verdict-text').textContent = `Kiváltható! A T18 ${ourThick}mm ${ourSpan}cm-es szelementávval ${pctDiff}%-kal ${ratio >= 1 ? 'erősebb' : 'hasonló'}.`;
        $('verdict-hint').textContent = '';
      } else {
        $('verdict-text').textContent = 'Nem kiváltható ezzel a beállítással.';
        // Find max span
        let maxSpan: number | null = null;
        for (let s = 150; s >= 40; s -= 1) {
          if (getCapacity('T18', ourThick, s / 100) >= compCap) { maxSpan = s; break; }
        }
        if (maxSpan) {
          $('verdict-hint').innerHTML = `A T18 ${ourThick}mm max. <strong>${maxSpan}cm</strong> szelementávval válthatja ki.`;
        } else {
          $('verdict-hint').textContent = 'Ez a kombináció nem váltható ki T18-cal – nagyobb profilra van szükség.';
        }
      }

      // Capacity bars
      $('comp-bar-label').textContent = `${compProfile} ${compThick}mm @ ${compSpan}cm`;
      $('comp-bar-value').textContent = compCap.toFixed(2) + ' kN/m²';
      ($('comp-bar-fill') as HTMLElement).style.width = Math.min((compCap / maxCap) * 100, 100) + '%';

      $('our-bar-label').textContent = `T18 ${ourThick}mm @ ${ourSpan}cm`;
      $('our-bar-value').textContent = ourCap.toFixed(2) + ' kN/m²';
      ($('our-bar-fill') as HTMLElement).style.width = Math.min((ourCap / maxCap) * 100, 100) + '%';
    }

    function updateSliderBg(id: string, value: number, min: number, max: number, color: string) {
      const slider = $(id) as HTMLInputElement;
      const pct = ((value - min) / (max - min)) * 100;
      slider.style.background = `linear-gradient(to right, ${color} ${pct}%, #334155 ${pct}%)`;
    }

    function buildTable() {
      const spans = [60, 70, 80, 90, 100, 110, 120];
      const tbody = $('calc-table-body');
      tbody.innerHTML = spans.map((s, i) => {
        const t04 = getCapacity('T18', 0.4, s / 100);
        const t05 = getCapacity('T18', 0.5, s / 100);
        const t06 = getCapacity('T18', 0.6, s / 100);
        return `<tr class="${i % 2 ? 'row-alt' : ''}">
          <td>${s} cm</td>
          <td>${t04.toFixed(2)}</td>
          <td class="col-highlight">${t05.toFixed(2)}</td>
          <td class="col-highlight col-strong">${t06.toFixed(2)}</td>
        </tr>`;
      }).join('');
    }

    // Initialize
    setupButtonGroup('comp-profile-btns', (v) => { compProfile = v; update(); });
    setupButtonGroup('comp-thick-btns', (v) => { compThick = parseFloat(v); update(); });
    setupButtonGroup('our-thick-btns', (v) => { ourThick = parseFloat(v); update(); });

    ($('comp-span') as HTMLInputElement).addEventListener('input', (e) => {
      compSpan = parseInt((e.target as HTMLInputElement).value);
      update();
    });
    ($('our-span') as HTMLInputElement).addEventListener('input', (e) => {
      ourSpan = parseInt((e.target as HTMLInputElement).value);
      update();
    });

    buildTable();
    update();
  })();
</script>

<style>
  .calc-root {
    background: #0f172a;
    color: #e2e8f0;
    font-family: 'DM Sans', 'Segoe UI', sans-serif;
    padding: 24px 16px;
    border-radius: 16px;
  }

  /* Header */
  .calc-header {
    max-width: 900px;
    margin: 0 auto 32px;
    text-align: center;
  }

  .calc-badge {
    display: inline-block;
    padding: 4px 12px;
    background: #f59e0b22;
    border: 1px solid #f59e0b44;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 700;
    color: #f59e0b;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    margin-bottom: 12px;
    font-family: monospace;
  }

  .calc-title {
    font-size: clamp(20px, 3.5vw, 28px);
    font-weight: 900;
    line-height: 1.2;
    margin: 0 0 8px;
    color: #e2e8f0;
  }

  .calc-subtitle {
    font-size: 14px;
    color: #64748b;
    margin: 0 auto;
    max-width: 600px;
  }

  /* Disclaimer */
  .calc-disclaimer {
    max-width: 900px;
    margin: 0 auto 24px;
    padding: 16px 20px;
    background: #f59e0b15;
    border: 2px solid #f59e0b55;
    border-radius: 12px;
  }

  .calc-disclaimer-inner {
    display: flex;
    gap: 12px;
    align-items: flex-start;
  }

  .calc-disclaimer-icon {
    font-size: 24px;
    line-height: 1;
  }

  .calc-disclaimer strong {
    display: block;
    font-size: 14px;
    margin-bottom: 4px;
    color: #f59e0b;
  }

  .calc-disclaimer span {
    font-size: 13px;
    color: #fbbf24;
    line-height: 1.7;
  }

  /* Grid */
  .calc-grid {
    max-width: 900px;
    margin: 0 auto 24px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  .calc-panel {
    background: #1e293b;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #334155;
  }

  .calc-panel--ours {
    background: linear-gradient(135deg, #1e293b, #172032);
    border-color: #22d3ee33;
    box-shadow: 0 0 30px #22d3ee11;
  }

  .calc-panel-label {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 12px;
    font-family: monospace;
  }

  .calc-panel-label--comp { color: #ef4444; }
  .calc-panel-label--ours { color: #22d3ee; }

  /* Fields */
  .calc-field {
    margin-bottom: 14px;
  }

  .calc-field-label {
    font-size: 12px;
    color: #64748b;
    margin-bottom: 6px;
  }

  /* Button groups */
  .calc-btn-group {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  .calc-btn {
    padding: 6px 14px;
    border-radius: 6px;
    border: 2px solid #334155;
    background: transparent;
    color: #94a3b8;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    font-family: monospace;
    transition: all 0.15s;
  }

  .calc-btn--fixed {
    cursor: default;
  }

  .calc-btn--comp.calc-btn--active {
    border-color: #ef4444;
    background: #ef444422;
    color: #ef4444;
  }

  .calc-btn--ours.calc-btn--active {
    border-color: #22d3ee;
    background: #22d3ee22;
    color: #22d3ee;
  }

  /* Sliders */
  .calc-slider-wrap {
    margin-bottom: 16px;
  }

  .calc-slider-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
  }

  .calc-slider-label {
    font-size: 13px;
    color: #94a3b8;
    font-family: monospace;
  }

  .calc-slider-value {
    font-size: 15px;
    font-weight: 700;
    font-family: monospace;
  }

  .calc-slider-value--comp { color: #ef4444; }
  .calc-slider-value--ours { color: #22d3ee; }

  .calc-range {
    width: 100%;
    height: 6px;
    -webkit-appearance: none;
    appearance: none;
    background: #334155;
    border-radius: 3px;
    outline: none;
    cursor: pointer;
  }

  .calc-range::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 2px solid #fff;
    cursor: pointer;
  }

  .calc-range--comp::-webkit-slider-thumb { background: #ef4444; }
  .calc-range--ours::-webkit-slider-thumb { background: #22d3ee; }

  .calc-range::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 2px solid #fff;
    cursor: pointer;
  }

  .calc-range--comp::-moz-range-thumb { background: #ef4444; }
  .calc-range--ours::-moz-range-thumb { background: #22d3ee; }

  .calc-slider-minmax {
    display: flex;
    justify-content: space-between;
    margin-top: 2px;
    font-size: 11px;
    color: #64748b;
  }

  /* Result */
  .calc-result {
    background: #0f172a;
    border-radius: 8px;
    padding: 14px;
    text-align: center;
  }

  .calc-result-label {
    font-size: 11px;
    color: #64748b;
    margin-bottom: 4px;
  }

  .calc-result-value {
    font-size: 28px;
    font-weight: 900;
    font-family: monospace;
  }

  .calc-result-value--comp { color: #ef4444; }
  .calc-result-value--ours { color: #22d3ee; }

  .calc-result-unit {
    font-size: 11px;
    color: #64748b;
  }

  /* Verdict */
  .calc-verdict {
    max-width: 900px;
    margin: 0 auto 24px;
    border-radius: 12px;
    padding: 20px;
  }

  .calc-verdict--yes {
    background: #22d3ee11;
    border: 1px solid #22d3ee33;
  }

  .calc-verdict--no {
    background: #f59e0b11;
    border: 1px solid #f59e0b33;
  }

  .calc-verdict-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
  }

  .calc-verdict-icon {
    width: 40px;
    height: 40px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    flex-shrink: 0;
  }

  .calc-verdict-icon--yes { background: #22d3ee22; color: #22d3ee; }
  .calc-verdict-icon--no { background: #f59e0b22; color: #f59e0b; }

  .calc-verdict-text {
    font-size: 16px;
    font-weight: 700;
  }

  .calc-verdict--yes .calc-verdict-text { color: #22d3ee; }
  .calc-verdict--no .calc-verdict-text { color: #f59e0b; }

  .calc-verdict-hint {
    font-size: 13px;
    color: #94a3b8;
    margin-top: 4px;
  }

  /* Capacity bars */
  .calc-bar-wrap {
    margin-bottom: 8px;
  }

  .calc-bar-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 3px;
  }

  .calc-bar-label {
    font-size: 12px;
    color: #94a3b8;
  }

  .calc-bar-value {
    font-size: 13px;
    font-weight: 700;
    font-family: monospace;
  }

  .calc-bar-value--comp { color: #ef4444; }
  .calc-bar-value--ours { color: #22d3ee; }

  .calc-bar {
    height: 20px;
    background: #1e293b;
    border-radius: 4px;
    overflow: hidden;
  }

  .calc-bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.3s ease;
  }

  .calc-bar-fill--comp {
    background: linear-gradient(90deg, #ef4444cc, #ef4444);
  }

  .calc-bar-fill--ours {
    background: linear-gradient(90deg, #22d3eecc, #22d3ee);
  }

  /* Load table */
  .calc-table-section {
    max-width: 900px;
    margin: 0 auto 24px;
    background: #1e293b;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #334155;
  }

  .calc-table-title {
    font-size: 16px;
    font-weight: 700;
    margin: 0 0 4px;
    color: #e2e8f0;
  }

  .calc-table-sub {
    font-size: 12px;
    color: #64748b;
    margin: 0 0 16px;
  }

  .calc-table-wrap {
    overflow-x: auto;
  }

  .calc-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
    font-family: monospace;
  }

  .calc-table th {
    text-align: left;
    padding: 8px 12px;
    border-bottom: 2px solid #334155;
    color: #94a3b8;
    font-size: 11px;
    font-weight: 500;
  }

  .calc-table th.col-highlight {
    border-bottom-color: #22d3ee55;
    color: #22d3ee;
    font-weight: 700;
  }

  .calc-table td {
    padding: 7px 12px;
    border-bottom: 1px solid #334155;
    color: #cbd5e1;
  }

  .calc-table td.col-highlight {
    color: #22d3ee;
    font-weight: 500;
  }

  .calc-table td.col-strong {
    font-weight: 700;
  }

  .calc-table .row-alt {
    background: #0f172a44;
  }

  /* Why section */
  .calc-why {
    max-width: 900px;
    margin: 0 auto 24px;
    background: #172032;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #334155;
  }

  .calc-why h4 {
    font-size: 15px;
    font-weight: 700;
    margin: 0 0 12px;
    color: #f59e0b;
  }

  .calc-why p {
    font-size: 13px;
    color: #94a3b8;
    line-height: 1.7;
    margin: 0 0 8px;
  }

  .calc-why p:last-child {
    margin-bottom: 0;
  }

  .calc-why strong {
    color: #e2e8f0;
  }

  .calc-why code {
    color: #22d3ee;
    font-family: monospace;
    background: none;
    padding: 0;
  }

  /* Methodology */
  .calc-methodology {
    max-width: 900px;
    margin: 0 auto;
    padding: 16px 20px;
    background: #1e293b;
    border-radius: 8px;
    border: 1px solid #334155;
    font-size: 11px;
    color: #64748b;
    line-height: 1.7;
  }

  .calc-methodology strong {
    color: #94a3b8;
  }

  .calc-methodology strong:last-of-type {
    color: #f59e0b;
  }

  /* Responsive */
  @media (max-width: 640px) {
    .calc-grid {
      grid-template-columns: 1fr;
    }

    .calc-result-value {
      font-size: 22px;
    }

    .calc-verdict-text {
      font-size: 14px;
    }

    .calc-btn {
      padding: 5px 10px;
      font-size: 12px;
    }
  }
</style>
